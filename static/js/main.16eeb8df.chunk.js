(this["webpackJsonpinkia-app"]=this["webpackJsonpinkia-app"]||[]).push([[0],{162:function(e,t,a){e.exports=a.p+"static/media/Logo.28e991d9.svg"},204:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},405:function(e,t,a){e.exports=a(525)},420:function(e,t,a){},421:function(e,t,a){},516:function(e,t,a){},517:function(e,t,a){},518:function(e,t,a){},519:function(e,t,a){},520:function(e,t,a){},521:function(e,t,a){},522:function(e,t,a){},523:function(e,t,a){},525:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(21),o=a.n(r),c=a(9),i=a(56),s=a(36),u=a(39),m=a.n(u),d=a(83),E=a(561),p=a(275);a(414),a(526),a(418);p.initializeApp({apiKey:"AIzaSyAKPk_uPxrH7VHv1IZ5vetuNPCGPvVq-3I",authDomain:"inkia-hackaton.firebaseapp.com",databaseURL:"https://inkia-hackaton.firebaseio.com",projectId:"inkia-hackaton",storageBucket:"inkia-hackaton.appspot.com",messagingSenderId:"654990055875",appId:"1:654990055875:web:2129188a6af1c177a94576",measurementId:"G-MCXVFK0B8C"});var b=p,f=(a(420),function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"preloader"}),l.a.createElement("h3",{className:"text-loading"},"Cargando..."))}),h=l.a.createContext(),v=function(e){var t=e.children,a=Object(n.useState)(null),r=Object(c.a)(a,2),o=r[0],i=r[1],s=Object(n.useState)(!0),u=Object(c.a)(s,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){b.auth().onAuthStateChanged((function(e){i(e),d(!1)}))}),[]),m?l.a.createElement(f,null):l.a.createElement(h.Provider,{value:{currentUser:o}},t)},g=(a(421),a(162)),j=a.n(g),O=Object(s.i)((function(e){var t=e.history,a=Object(n.useState)(""),r=Object(c.a)(a,2),o=r[0],i=r[1],u=Object(n.useState)(""),p=Object(c.a)(u,2),f=p[0],v=p[1],g=Object(n.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,b.auth().signInWithEmailAndPassword(o,f);case 4:t.push("/budgets"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[o,f,t]);return Object(n.useContext)(h).currentUser?l.a.createElement(s.a,{to:"/Home"}):l.a.createElement("div",{className:"Form-Login"},l.a.createElement(E.a,{className:"form-style",onSubmit:g},l.a.createElement("img",{className:"Logo",src:j.a,alt:"Logo"}),l.a.createElement(E.a.Group,{controlId:"formBasicEmail"},l.a.createElement("div",{className:"email"},l.a.createElement(E.a.Control,{className:"input-style email-form",onChange:function(e){return i(e.target.value)},value:o,type:"email",placeholder:"Usuario"}))),l.a.createElement(E.a.Group,{controlId:"formBasicPassword"},l.a.createElement("div",{className:"password"},l.a.createElement(E.a.Control,{className:"input-style password",type:"password",value:f,onChange:function(e){return v(e.target.value)},placeholder:"Contrase\xf1a"}))),l.a.createElement("div",null,l.a.createElement("button",{className:"Button-enter",type:"submit"},l.a.createElement("p",{className:"Text-Enter"}," Login ")))))})),C=a(95),N=a(527),y=a(34),S=a(557),x=a(74),w=a(375),A=a(535),k=a(529),P=a(558),R=a(361),_=a(357),F=a(22),T=a(29),L=a(26),B=a(91),G=a(102),D=a.n(G),I=a(358),z=a(380),U=a(563),H=function(e,t){b.firestore().collection(e).add(t)},M=function(e,t,a){b.firestore().collection(e).doc(t).update(a)},V=function(e,t){b.firestore().collection(e).doc(t).delete()},q=a(560),K=(a(516),function(e){var t=e.path;console.log(t);var a=Object(n.useState)(),r=Object(c.a)(a,2),o=r[0],i=r[1];Object(s.g)();return Object(n.useEffect)((function(){i(b.auth().currentUser)})),l.a.createElement("div",{className:"container-header"},l.a.createElement("div",{className:"location"},t.toUpperCase()),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",null,o?o.email:""),l.a.createElement("img",{src:"https://img.icons8.com/cotton/64/000000/gender-neutral-user--v3.png",alt:"avatar"})))}),W=(a(370),Object(_.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar}}))),J=Object(s.i)((function(e){for(var t=W(),a=(Object(F.a)(),Object(B.a)()),r=a.register,o=a.handleSubmit,i=l.a.useState([]),s=Object(c.a)(i,2),u=(s[0],s[1]),m=l.a.useState({}),d=Object(c.a)(m,2),p=d[0],f=d[1],h=l.a.useState(""),v=Object(c.a)(h,2),g=v[0],j=(v[1],l.a.useState("noedit")),O=Object(c.a)(j,2),N=O[0],y=O[1],S=l.a.useState([]),x=Object(c.a)(S,2),w=x[0],A=x[1],k=l.a.useState(!1),P=Object(c.a)(k,2),R=P[0],_=P[1],G=l.a.useState([]),V=Object(c.a)(G,2),J=V[0],Q=V[1],Z=l.a.useState([]),X=Object(c.a)(Z,2),$=X[0],Y=X[1],ee=l.a.useState([]),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],le=l.a.useState([]),re=Object(c.a)(le,2),oe=re[0],ce=re[1],ie=l.a.useState(),ue=Object(c.a)(ie,2),me=ue[0],de=ue[1],Ee=l.a.useState(!0),pe=Object(c.a)(Ee,2),be=pe[0],fe=pe[1],he=l.a.useState("button1"),ve=Object(c.a)(he,2),ge=ve[0],je=ve[1],Oe=l.a.useState([]),Ce=Object(c.a)(Oe,2),Ne=Ce[0],ye=Ce[1],Se=l.a.useState([]),xe=Object(c.a)(Se,2),we=xe[0],Ae=xe[1],ke=l.a.useState([]),Pe=Object(c.a)(ke,2),Re=Pe[0],_e=Pe[1],Fe=l.a.useState([]),Te=Object(c.a)(Fe,2),Le=Te[0],Be=Te[1],Ge=l.a.useState([]),De=Object(c.a)(Ge,2),Ie=De[0],ze=De[1],Ue=function(e){"num_concept"===e.target.name&&de(e.target.value),f(e.target.value)},He=function(e,t){fe(!0),je(e),b.firestore().collection("budgets").where("estado","==",t).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(L.a)({id:e.id},e.data()))})),A(t)}))},Me=function(e,t){fe(!1),je(e),b.firestore().collection("factura").where("status","==",t).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(L.a)({id:e.id},e.data()))})),Q(t)}))},Ve=Array(me).fill(0),qe=Array(me).fill(0),Ke=Array(me).fill(0),We=Array(me).fill(0),Je=Array(me).fill(0),Qe=Array(me).fill(0),Ze=function(e){console.log(e.target.value);var t=e.target.dataset.index;Ve=Object(T.a)($),qe=Object(T.a)(ae),Ke=Object(T.a)(oe),We=Object(T.a)(Ne),Je=Object(T.a)(we),Qe=Object(T.a)(Re),e.target.name.includes("form_cobro")&&(Ve[t]=e.target.value,Y(Ve)),e.target.name.includes("form_payment")&&(qe[t]=e.target.value,ne(qe)),e.target.name.includes("num_hitos")&&(Ke[t]=e.target.value,ce(Ke)),e.target.name.includes("total")&&(We[t]=e.target.value,ye(We)),e.target.name.includes("tarifa_hora")&&(Je[t]=e.target.value,Ae(Je)),e.target.name.includes("hora_estimada")&&(Qe[t]=e.target.value,_e(Qe))},Xe=function(e){return console.log(e,"array"),(e=e.map((function(e){return void 0===e||isNaN(e)?0:e}))).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0)},$e=function(e,t){return e.map((function(e,a){return e=isNaN(e)?0:e,parseInt(e)*parseInt(t[a])}))},Ye=[],et=function(e){Ye.push(l.a.createElement("div",{style:{width:"100%"}},l.a.createElement("div",{className:"title-concept"},"Concepto ",e+1),l.a.createElement(E.a.Group,null,l.a.createElement(E.a.Label,null,"Descripci\xf3n"),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"concepto"+e,id:"concepto"+e,onChange:Ze})),l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Tipo de cobro"),l.a.createElement(E.a.Control,{size:"sm",as:"select",defaultValue:"Choose...",ref:r,"data-index":e,name:"form_cobro"+e,id:"form_cobro"+e,onChange:Ze},l.a.createElement("option",null,"Choose..."),l.a.createElement("option",null,"Fijo"),l.a.createElement("option",null,"Fijo + exito"),l.a.createElement("option",null,"Horas"))),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Forma de pago"),l.a.createElement(E.a.Control,{size:"sm",as:"select",defaultValue:"Choose...",ref:r,"data-index":e,name:"form_payment"+e,id:"form_payment"+e,onChange:Ze},l.a.createElement("option",null,"Choose..."),l.a.createElement("option",null,"Hitos"),l.a.createElement("option",null,"Mensual"),l.a.createElement("option",null,"Bimestral"),l.a.createElement("option",null,"Trimestral"),l.a.createElement("option",null,"Semestral"),l.a.createElement("option",null,"Anual")))))),"Fijo"===$[e]&&Ye.push(l.a.createElement(E.a.Group,{style:{width:"100%"}},l.a.createElement(E.a.Label,null,"Monto"),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"total"+e,"data-index":e,id:"total"+e,onChange:Ze})),l.a.createElement("p",{className:"subTotal",ref:r,name:"subtotal"+e,"data-index":e,id:"subtotal"+e,onChange:Ze},l.a.createElement("span",{className:"bold"},"SubTotal:")," ",Ne[e])),"Fijo + exito"===$[e]&&Ye.push(l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Monto"),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"total"+e,"data-index":e,id:"total"+e,onChange:Ze})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Definicion de \xe9xito"),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"descripcion"+e,id:"descripcion"+e,onChange:Ze}))),l.a.createElement("p",{className:"subTotal",ref:r,name:"subtotal"+e,"data-index":e,id:"subtotal"+e,onChange:Ze},l.a.createElement("span",{className:"bold"},"SubTotal:")," ",Ne[e]))),"Horas"===$[e]&&Ye.push(l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Tarifa horaria"),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"tarifa_hora"+e,"data-index":e,id:"tarifa_hora"+e,onChange:Ze})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Horas estimadas"),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"hora_estimada"+e,"data-index":e,id:"hora_estimada"+e,onChange:Ze}))),l.a.createElement("p",{className:"subTotal"},l.a.createElement("span",{className:"bold"},"SubTotal: ")," ",parseInt(we[e])*parseInt(Re[e])))),"Hitos"===ae[e]&&(Ye.push(l.a.createElement("div",null,l.a.createElement(E.a.Label,null,"N\xfamero de hitos:"),l.a.createElement(E.a.Control,{size:"sm",as:"select",defaultValue:"Choose...",ref:r,"data-index":e,name:"num_hitos"+e,id:"num_hitos"+e,onChange:Ze},l.a.createElement("option",null,"Choose..."),Object(T.a)(Array(5)).map((function(e,t){return l.a.createElement("option",null,t+1)}))))),oe[e]&&(console.log(oe[e],"i"),Ye.push(l.a.createElement("div",null,Object(T.a)(Array(parseInt(oe[e]))).map((function(t,a){return l.a.createElement("div",null,l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Monto del hito ",a+1),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"hito_monto"+e+a,id:"hito_monto"+e+a,onChange:Ze})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Descripcion del hito ",a+1),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"hito_desc"+e+a,id:"hito_desc"+e+a,onChange:Ze}))))}))))))},tt=0;tt<me;tt++)et(tt);var at=function(t){e.history.push("/budgets/".concat(t))};return Object(n.useEffect)((function(){b.firestore().collection("budgets").where("estado","==","pendiente").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(L.a)({id:e.id},e.data()))})),A(t)}))}),[]),Object(n.useEffect)((function(){b.firestore().collection("subject").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(L.a)({id:e.id},e.data()))})),u(t)}))}),[]),Object(n.useEffect)((function(){b.firestore().collection("companies").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(L.a)({id:e.id},e.data()))})),Be(t)}))}),[]),l.a.createElement("div",{className:t.root},l.a.createElement(se,null),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(K,{className:t.toolbar,path:"inicio"}),l.a.createElement("div",{className:"d-flex flex-column align-items-center container-budget"},l.a.createElement(q.a,{className:"btn-group"},l.a.createElement(I.a,{id:"button1",onClick:function(e){return He("button1","pendiente")},className:"button1"===ge?"active":"btn-budget"},"Presupuestos por aprobar"),l.a.createElement(I.a,{id:"button2",onClick:function(e){return He("button2","pendiente de aprobacion")},className:"button2"===ge?"active":"btn-budget"},"Presupuestos aprobados"),l.a.createElement(I.a,{id:"button3",onClick:function(e){return Me("button3","pendiente")},className:"button3"===ge?"active":"btn-budget"},"Facturas por aprobar"),l.a.createElement(I.a,{id:"button4",onClick:function(e){return Me("button4","aprobada")},className:"button4"===ge?"active":"btn-budget"},"Facturas aprobadas")),l.a.createElement(C.a,{show:R,onHide:function(){return _(!1)}},l.a.createElement(U.a,{style:{width:"35rem"}},l.a.createElement(U.a.Body,null,l.a.createElement(E.a,{onSubmit:o("edit"===N?function(e,t){t.preventDefault(),e.estado="PENDIENTE",y("noedit"),M("budgets",g,e)}:function(e,t){for(var a=Object.keys(e),n=Object.values(e),l=[],r=[],o=0,c=!1,i=0;i<a.length;i++)console.log(a[i],a[i].includes("tarifa_hora")),a[i].includes("tarifa_hora")&&(c=!0,l.push(n[i])),a[i].includes("hora_estimada")&&r.push(n[i]),a[i].includes("total")&&(o+=parseInt(n[i]));console.log(l,r,o);var s=c?Xe($e(l,r)):0;e.montoTotal=s+o,t.preventDefault(),e.estado="pendiente",function(e){return b.storage().ref().child("presupuestos/".concat(e.name)).put(e).then((function(e){return e.ref.getDownloadURL()}))}(Ie[0]).then((function(t){e.pdf=t,H("budgets",e)}))})},l.a.createElement("div",{className:"width-90"},l.a.createElement("h5",null,"Contacto del proveedor"),l.a.createElement("hr",null),l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Proveedor"),l.a.createElement(E.a.Control,{size:"sm",type:"text",placeholder:"",ref:r,name:"provider",id:"provider",onChange:Ue,value:p.provider})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Tipo de servicio"),l.a.createElement(E.a.Control,{size:"sm",as:"select",defaultValue:"Choose...",ref:r,name:"type_service",id:"type_service",onChange:Ue,value:p.type_service},l.a.createElement("option",null,"Choose..."),l.a.createElement("option",null,"Agente residente"),l.a.createElement("option",null,"Controversia"),l.a.createElement("option",null,"Financiamiento/proyecto"),l.a.createElement("option",null,"Notaria"),l.a.createElement("option",null,"Otro")))),l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Contacto del proveedor"),l.a.createElement(E.a.Control,{size:"sm",placeholder:"",ref:r,name:"name",id:"name",onChange:Ue,value:p.name})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Celular"),l.a.createElement(E.a.Control,{size:"sm",placeholder:"",ref:r,name:"celular",id:"celular",onChange:Ue,value:p.celular})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Email"),l.a.createElement(E.a.Control,{type:"email",size:"sm",placeholder:"",ref:r,name:"email",id:"email",onChange:Ue,value:p.email})))),l.a.createElement("div",{className:"width-90"},l.a.createElement("h5",null,"Conceptos"),l.a.createElement("hr",null),l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Asunto"),l.a.createElement(E.a.Control,{type:"text",size:"sm",placeholder:"",ref:r,name:"subject",id:"subject",onChange:Ue,value:p.subject})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Moneda"),l.a.createElement(E.a.Control,{size:"sm",as:"select",defaultValue:"Choose...",ref:r,name:"currency",id:"currency",onChange:Ze,value:p.currency},l.a.createElement("option",null,"Choose..."),l.a.createElement("option",null,"Soles"),l.a.createElement("option",null,"Euros"),l.a.createElement("option",null,"Dolares"),l.a.createElement("option",null,"Libras esterlinas"))),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"N\xfamero de conceptos:"),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"num_concept",id:"num_concept",onChange:Ue,value:p.num_concept}))),l.a.createElement("div",{className:"container-concepts"},me&&Ye,me&&l.a.createElement("p",{className:"pTotal"},l.a.createElement("span",{className:"bold"},"Monto total: ")," ",Xe($e(we,Re))+Xe(Ne))),l.a.createElement(E.a.Group,null,l.a.createElement(E.a.Label,null,"Alcance del encargo"),l.a.createElement(E.a.Control,{as:"textarea",rows:"3",className:"alcance",ref:r,name:"alcance",id:"alcance",onChange:Ue,value:p.alcance}))),l.a.createElement("div",{className:"width-90"},l.a.createElement("h5",null,"Empresa contratante"),l.a.createElement("hr",null),l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Empresa contratante"),l.a.createElement(E.a.Control,{size:"sm",as:"select",defaultValue:"Choose...",ref:r,name:"company",id:"company",onChange:Ue,value:p.company},l.a.createElement("option",null,"Choose..."),Le.map((function(e){return l.a.createElement("option",null,e.nameCompany)})))),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Responsable en Inkia"),l.a.createElement(E.a.Control,{size:"sm",ref:r,name:"corporative",id:"corporative",onChange:Ue,value:p.corporative}))),l.a.createElement(E.a.Group,null,l.a.createElement(E.a.Label,null,"Presupuesto"),l.a.createElement(E.a.Control,{type:"file",className:"hide my-2 fileButton",name:"file",id:"fileButton",onChange:function(e){return ze(e.target.files)}}))),l.a.createElement(I.a,{className:"button-save",size:"large",variant:"outlined",type:"submit"},"edit"===N?"EDIT":"SAVE"))))),l.a.createElement("div",{style:{width:"100%"}},be?l.a.createElement(D.a,{columns:[{title:"ASUNTO",field:"subject"},{title:"PROVEEDOR",field:"provider"},{title:"TIPO DE SERVICIO",field:"type_service"},{title:"RESPONSABLE",field:"corporative"}],data:w,onRowClick:function(e,t){return at(t.id)},title:"",options:{headerStyle:{backgroundColor:"#9e8ca9",color:"#000"}}}):l.a.createElement(D.a,{columns:[{title:"N\xb0 DE FACTURA",field:"numFactura"},{title:"ASUNTO",field:"subject"},{title:"PROVEEDOR",field:"provider"},{title:"RESPONSABLE",field:"corporative"},{title:"ESTADO",field:"substatus"}],data:J,onRowClick:function(e,t){return at(t.idBudget)},title:"",options:{headerStyle:{backgroundColor:"#9e8ca9",color:"#000"}}})),l.a.createElement("button",{type:"buttom",className:"newButton",onClick:function(){return _(!0)}},"Nuevo"))))})),Q=(a(371),a(517),a(204),function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)({}),s=Object(c.a)(i,2),u=s[0],m=s[1],d=Object(B.a)(),E=d.register,p=d.handleSubmit,f=d.errors,h=function(e){m(e.target.value)};return Object(n.useEffect)((function(){b.firestore().collection("companies").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(L.a)({id:e.id},e.data())}));o(t)}))}),[]),l.a.createElement(C.a,Object.assign({},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),l.a.createElement(C.a.Header,{closeButton:!0},l.a.createElement(C.a.Title,{id:"contained-modal-title-vcenter"},"Crear un asunto")),l.a.createElement(C.a.Body,null,l.a.createElement("form",{onSubmit:p((function(e,t){console.log(e),t.preventDefault(),H("subject",e),t.target.reset()}))},l.a.createElement("p",{className:"name"},"Nombre del asunto: ",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement("input",{type:"text",name:"nameSubject",className:"nameSubject form-asunto",id:"nameSubject",value:u.nameSubject,onChange:h,ref:E({required:{value:!0,message:"Campo Obligatorio"}})}),l.a.createElement("span",{className:"text-danger text-small d-block mb-2"},f.nameSubject&&f.nameSubject.message),l.a.createElement("label",null,"Empresa que va a facturar: ",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement("select",{className:"select-asunto",defaultValue:"Choose...",name:"billSubject",type:"select",ref:E,onChange:h},l.a.createElement("option",null,"Choose..."),r.map((function(e){return l.a.createElement("option",{key:e.id,value:e.nameCompany},e.nameCompany)}))),l.a.createElement("span",{className:"text-danger text-small d-block mb-2"},f.billSubject&&f.billSubject.message),l.a.createElement("label",null,"Responsable de Inkia: ",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement("input",{type:"text",name:"responsibleSubject",className:"responsable",id:"responsibleSubject",value:u.responsibleSubject,onChange:h,ref:E({required:{value:!0,message:"Campo Obligatorio"}})}),l.a.createElement("span",{className:"text-danger text-small d-block mb-2"},f.responsibleSubject&&f.responsibleSubject.message),l.a.createElement("br",null),l.a.createElement("div",{className:"AllButtom"},l.a.createElement("div",{type:"buttom",className:"closeButtom btn btn-secondary",onClick:e.onHide},"Cancelar"),l.a.createElement("button",{type:"submit",className:"addButtom btn btn-secondary"},"Crear Asunto ")))))}),Z=Object(_.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar}})),X=function(e){var t=Z(),a=(Object(F.a)(),Object(n.useState)(null)),r=Object(c.a)(a,2),o=(r[0],r[1]),i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],m=s[1],d=l.a.useState(!1),E=Object(c.a)(d,2),p=E[0],f=E[1];return Object(n.useEffect)((function(){b.firestore().collection("subject").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(L.a)({id:e.id},e.data())}));m(t)}))}),[]),Object(n.useEffect)((function(){b.auth().currentUser?o(b.auth().currentUser):e.history.push("/login")}),[e.history]),l.a.createElement("div",{className:t.root},l.a.createElement(se,null),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(K,{className:t.toolbar,path:"asunto"}),l.a.createElement("div",{className:"container-subject"},l.a.createElement("div",{className:"divButton"},l.a.createElement("button",{tyoe:"buttom",className:"addSubject",onClick:function(){return f(!0)}},"Crear un asunto")),l.a.createElement(D.a,{title:"",columns:[{title:"ASUNTO",field:"nameSubject"},{title:"EMPRESA QUE VA A FACTURAR",field:"billSubject"},{title:"RESPONSABLE DE INKIA",field:"responsibleSubject"}],data:u,onRowClick:function(t,a){return n=a.id,void e.history.push("subject/".concat(n));var n},editable:{onRowAdd:function(e){return new Promise((function(t){setTimeout((function(){t(),H("subject",e)}),300)}))},onRowUpdate:function(e,t){return new Promise((function(a){setTimeout((function(){a(),M("subject",t.id,e)}),300)}))},onRowDelete:function(e){return new Promise((function(t){setTimeout((function(){t(),V("subject",e.id)}),300)}))}},options:{actionsColumnIndex:-1,headerStyle:{backgroundColor:"#9e8ca9",color:"#000"},rowStyle:{padding:"0 !important"}}}),l.a.createElement(Q,{show:p,onHide:function(){return f(!1)}}))))},$=a(390),Y=a.n($),ee=a(391),te=a.n(ee),ae=a(392),ne=a.n(ae),le=a(393),re=a.n(le),oe=a(394),ce=a.n(oe),ie=Object(_.a)((function(e){return{root:{display:"flex"},drawer:Object(y.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0,background:"#A20067"}),appBar:Object(y.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(y.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none",background:"#A20067"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240,background:"linear-gradient(45deg, #A20067 100%, #A20067 100%)"},content:{flexGrow:1},backGround:{width:"100%",background:"#A20067",height:579,position:"absolute",display:"flex",flexDirection:"column",alignItems:"center"},texto:{color:"#FFFFFF"}}}));var se=function(e){var t=e.window,a=ie(),n=Object(F.a)(),r=l.a.useState(!1),o=Object(c.a)(r,2),s=o[0],u=o[1],m=l.a.createElement("div",null,l.a.createElement("div",{className:a.backGround},l.a.createElement("div",{className:a.toolbar}),l.a.createElement("div",{className:"containerLogo"},l.a.createElement("img",{className:"LogoNav",src:j.a,alt:"Logo"})),l.a.createElement(A.a,{className:"text"},[{name:"Panel Principal",path:"/budgets"},{name:"Asuntos",path:"/subject"},{name:"Facturas",path:"/facturacion"},{name:"Proveedores",path:"/provider"}].map((function(e,t){return l.a.createElement(i.c,{className:"list",to:e.path},l.a.createElement(k.a,{button:!0,key:e.name},l.a.createElement(P.a,null,0===t?l.a.createElement(Y.a,null):1===t?l.a.createElement(te.a,null):2===t?l.a.createElement(ne.a,null):l.a.createElement(re.a,null)),l.a.createElement(R.a,{primary:e.name})))})),l.a.createElement(k.a,{button:!0,className:"list",onClick:function(){b.auth().signOut().then((function(){e.history.push("/")})).catch((function(e){console.log(e)}))}},l.a.createElement(P.a,null," ",l.a.createElement(ce.a,null)),l.a.createElement(R.a,{className:"list",primary:"Cerrar Sesi\xf3n"}))))),d=void 0!==t?function(){return t().document.body}:void 0;return l.a.createElement("div",null,l.a.createElement("div",{className:a.root},l.a.createElement(S.a,null),l.a.createElement("nav",{className:a.drawer,"aria-label":"mailbox folders"},l.a.createElement(w.a,{smUp:!0,implementation:"css"},l.a.createElement(x.a,{container:d,variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:s,onClose:function(){u(!s)},classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},m)),l.a.createElement(w.a,{xsDown:!0,implementation:"css"},l.a.createElement(x.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},m))),l.a.createElement("main",{className:a.content})))},ue=(a(518),function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],o=a[1];return l.a.createElement("div",{style:{height:"100vh"}},l.a.createElement("div",{className:"modales"},l.a.createElement(C.a,{className:"modales",show:r,onHide:function(){return o(!1)}},l.a.createElement(C.a.Header,{closeButton:!0},l.a.createElement(C.a.Title,null,"Cerrar Sesi\xf3n")),l.a.createElement(C.a.Body,null,"\xbfEst\xe1s seguro de cerrar sesi\xf3n?"),l.a.createElement(C.a.Footer,null,l.a.createElement(N.a,{variant:"secondary",onClick:function(){b.auth().signOut().then((function(){e.history.push("/")})).catch((function(e){console.log(e)}))}},"Cerrar")))),l.a.createElement(se,{close:function(){return o(!0)}}))}),me=function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)({}),E=Object(c.a)(d,2),p=E[0],f=E[1],h=Object(n.useState)(!1),v=Object(c.a)(h,2),g=v[0],j=v[1],O=Object(n.useState)(""),C=Object(c.a)(O,2),N=C[0],y=C[1],S=Object(B.a)(),x=S.register,w=S.handleSubmit,A=S.errors;Object(n.useEffect)((function(){b.firestore().collection("companies").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(L.a)({id:e.id},e.data())}));m(t)}))}),[]),Object(n.useEffect)((function(){b.auth().currentUser?o(b.auth().currentUser):e.history.push("/login")}),[e.history]);var k=function(e){f(e.target.value)};return l.a.createElement("div",null,l.a.createElement("h1",null,"Compa\xf1ias"),r&&l.a.createElement("p",null,r.email),l.a.createElement("h3",null,g?"Editar Compa\xf1ia":"Agregar Compa\xf1ia"),l.a.createElement("form",{onSubmit:w(g?function(e,t){t.preventDefault(),M("companies",N,e),j(!1),y(""),f(""),t.target.reset()}:function(e,t){t.preventDefault(),H("companies",e),t.target.reset()})},l.a.createElement("label",null,"Nombre de Compa\xf1ia ",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement("input",{type:"text",name:"nameCompany",className:"form-control my-2",id:"nameCompany",value:p.nameCompany,onChange:k,ref:x({required:{value:!0,message:"Campo Obligatorio"}})}),l.a.createElement("span",{className:"text-danger text-small d-block mb-2"},A.nameCompany&&A.nameCompany.message),l.a.createElement("label",null,"Pa\xeds",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement("input",{type:"text",name:"country",className:"form-control my-2",id:"country",value:p.country,onChange:k,ref:x({required:{value:!0,message:"Campo Obligatorio"}})}),l.a.createElement("span",{className:"text-danger text-small d-block mb-2"},A.country&&A.country.message),l.a.createElement("label",null,"Responsable",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement("input",{type:"text",name:"leader",className:"form-control my-2",id:"leader",value:p.leader,onChange:k,ref:x({required:{value:!0,message:"Campo Obligatorio"}})}),l.a.createElement("span",{className:"text-danger text-small d-block mb-2"},A.leader&&A.leader.message),l.a.createElement("button",{className:g?"btn btn-warning":"btn btn-primary"},g?"Editar":"Agregar")),l.a.createElement("div",{className:"container mb-2"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h3",null,"Listado de Empresas"),l.a.createElement("ul",{className:"list-group"},u.map((function(e){return l.a.createElement("li",{className:"list-group-item",key:e.id},l.a.createElement("span",null,e.name),l.a.createElement("button",{onClick:function(){return V("companies",e.id)},className:"btn btn-danger btn-sm float-right"},"Eliminar"),l.a.createElement("button",{onClick:function(){return function(e){j(!0),y(e.id),f(e)}(e)},className:"btn btn-warning btn-sm float-right mr-2"},"Editar"))})))))))},de=a(395),Ee=function(e){var t=e.component,a=Object(de.a)(e,["component"]),r=Object(n.useContext)(h).currentUser;return l.a.createElement(s.b,Object.assign({},a,{render:function(e){return r?l.a.createElement(t,e):l.a.createElement(s.a,{to:"/"})}}))},pe=Object(_.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar}})),be=function(e){var t=pe(),a=(Object(F.a)(),Object(n.useState)(null)),r=Object(c.a)(a,2),o=(r[0],r[1]),i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],m=s[1],d=l.a.useState(!1),E=Object(c.a)(d,2);E[0],E[1];return Object(n.useEffect)((function(){b.firestore().collection("factura").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(L.a)({id:e.id},e.data())}));m(t)}))}),[]),Object(n.useEffect)((function(){b.auth().currentUser?o(b.auth().currentUser):e.history.push("/login")}),[e.history]),l.a.createElement("div",{className:t.root},l.a.createElement(se,null),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(K,{className:t.toolbar,path:"facturas"}),l.a.createElement("div",{className:"container-subject"},l.a.createElement(D.a,{title:"",columns:[{title:"N\xb0 DE FACTURA",field:"numFactura"},{title:"ASUNTO",field:"subject"},{title:"PROVEEDOR",field:"provider"},{title:"RESPONSABLE",field:"corporative"},{title:"ESTADO",field:"substatus"}],data:u,editable:{onRowAdd:function(e){return new Promise((function(t){setTimeout((function(){t(),H("factura",e)}),300)}))},onRowUpdate:function(e,t){return new Promise((function(a){setTimeout((function(){a(),M("factura",t.id,e)}),300)}))},onRowDelete:function(e){return new Promise((function(t){setTimeout((function(){t(),V("factura",e.id)}),300)}))}},options:{actionsColumnIndex:-1,headerStyle:{backgroundColor:"#9e8ca9",color:"#000"},rowStyle:{padding:"0 !important"}}}))))},fe=Object(_.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar}})),he=function(e){var t=fe(),a=(Object(F.a)(),Object(n.useState)(null)),r=Object(c.a)(a,2),o=(r[0],r[1]),i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],m=s[1],d=l.a.useState(!1),E=Object(c.a)(d,2),p=E[0],f=E[1];return Object(n.useEffect)((function(){b.firestore().collection("provider").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(L.a)({id:e.id},e.data())}));m(t)}))}),[]),Object(n.useEffect)((function(){b.auth().currentUser?o(b.auth().currentUser):e.history.push("/login")}),[e.history]),l.a.createElement("div",{className:t.root},l.a.createElement(se,null),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(K,{className:t.toolbar,path:"proveedores"}),l.a.createElement("div",{className:"container-subject"},l.a.createElement(D.a,{title:"",columns:[{title:"RAZ\xd3N SOCIAL",field:"socialProvider"},{title:"TIPO DE SERVICIO",field:"typeProvider"},{title:"PA\xcdS",field:"countryProvider"},{title:"CORREO ELECTR\xd3NICO",field:"emailProvider"}],data:u,editable:{onRowAdd:function(e){return new Promise((function(t){setTimeout((function(){t(),H("provider",e)}),300)}))},onRowUpdate:function(e,t){return new Promise((function(a){setTimeout((function(){a(),M("provider",t.id,e)}),300)}))},onRowDelete:function(e){return new Promise((function(t){setTimeout((function(){t(),V("provider",e.id)}),300)}))}},options:{actionsColumnIndex:-1,headerStyle:{backgroundColor:"#9e8ca9",color:"#000"},rowStyle:{padding:"0 !important"}}}),l.a.createElement(Q,{show:p,onHide:function(){return f(!1)}}))))},ve=function(){var e=Object(s.h)().id,t=Object(n.useState)({}),a=Object(c.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){b.firestore().collection("provider").doc(e).get().then((function(e){o(e.data())}))}),[]),l.a.createElement("div",null,l.a.createElement("h3",null,r.socialProvider),l.a.createElement("ul",null,l.a.createElement("li",null,r.typeProvider),l.a.createElement("li",null,r.countryProvider),l.a.createElement("li",null,r.emailProvider)))},ge=function(){var e=Object(s.h)().id,t=Object(n.useState)({}),a=Object(c.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),u=Object(c.a)(i,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){b.firestore().collection("subject").doc(e).get().then((function(e){o(e.data())}))}),[]),Object(n.useEffect)((function(){b.firestore().collection("subject").doc(e).collection("budgets").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(L.a)({id:e.id},e.data()))})),d(t)}))}),[]),console.log(m),l.a.createElement("div",null,l.a.createElement("h2",null," ",r.subject),l.a.createElement("p",null,r.responsibleSubject),l.a.createElement("div",null," Presupuestos "),m.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement("p",null,e.provider),l.a.createElement("span",null," ",e.total," ",e.currency))})))},je=(a(519),function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=(a[0],a[1]),o=Object(n.useState)({}),i=Object(c.a)(o,2),s=(i[0],i[1]),u=Object(B.a)(),m=u.register,d=u.handleSubmit,E=u.errors,p=l.a.useState(),f=Object(c.a)(p,2),h=f[0],v=f[1],g=function(e){s(e.target.value)};return Object(n.useEffect)((function(){b.firestore().collection("companies").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(L.a)({id:e.id},e.data())}));r(t)}))}),[]),l.a.createElement(C.a,Object.assign({},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),l.a.createElement(C.a.Header,{closeButton:!0},l.a.createElement(C.a.Title,{id:"contained-modal-title-vcenter",className:"modal-title"},"Crear una Factura")),l.a.createElement(C.a.Body,null,l.a.createElement("form",{className:"formulario",onSubmit:d((function(t,a){a.preventDefault();var n=Object(L.a)(Object(L.a)(Object(L.a)({},e.budget),t),{},{idBudget:e.idBudget,status:"pendiente",substatus:"REQUIERE REVISI\xd3N"});(function(e){return b.storage().ref().child("images/".concat(e.name)).put(e).then((function(e){return e.ref.getDownloadURL()}))})(h[0]).then((function(e){n.pdf=e,console.log(e),H("factura",n)})),console.log(n),a.target.reset()}))},l.a.createElement("label",null,"N\xb0 Factura",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement("input",{type:"text",size:"small",name:"numFactura",className:"form-control my-2",id:"numFactura",value:e.factura.numFactura,onChange:g,ref:m({required:{value:!0,message:"Campo Obligatorio"}})}),l.a.createElement("span",{className:"text-danger text-small d-block mb-2"},E.numFactura&&E.numFactura.message),l.a.createElement("label",null,"Fecha",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement("input",{type:"date",name:"dateFactura",className:"form-control my-2",id:"dateFactura",value:e.factura.dateFactura,onChange:g,ref:m({required:{value:!0,message:"Campo Obligatorio"}})}),l.a.createElement("label",null,"Factura",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement("input",{type:"file",className:"hide my-2 fileButton",name:"file",id:"fileButton",onChange:function(e){return v(e.target.files)}}),l.a.createElement("span",{className:"text-danger text-small d-block mb-2"},E.dateFactura&&E.dateFactura.message),l.a.createElement("button",{className:"Main"},"AGREGAR"))))}),Oe=(a(520),Object(s.i)((function(e){var t=Object(B.a)(),a=t.register,r=t.handleSubmit,o=l.a.useState({}),i=Object(c.a)(o,2),s=i[0],u=i[1],m=l.a.useState(""),d=Object(c.a)(m,2),p=d[0],f=(d[1],l.a.useState("noedit")),h=Object(c.a)(f,2),v=h[0],g=h[1],j=l.a.useState(!1),O=Object(c.a)(j,2),N=O[0],y=O[1],S=l.a.useState(),x=Object(c.a)(S,2),w=x[0],A=x[1],k=l.a.useState(),P=Object(c.a)(k,2),R=P[0],_=P[1],F=l.a.useState(),G=Object(c.a)(F,2),D=G[0],H=G[1],V=l.a.useState([]),q=Object(c.a)(V,2),K=q[0],W=q[1],J=function(e){"form_cobro"===e.target.name&&A(e.target.value),"form_payment"===e.target.name&&_(e.target.value),"num_hitos"===e.target.name&&H(e.target.value),u(e.target.value)};Object(n.useEffect)((function(){b.firestore().collection("budgets").doc(e.factura.idBudget).get().then((function(e){var t=Object.keys(e.data()).map((function(t){return"concepto"===t.substr(0,8)?e.data()[t]:""})).filter((function(e){return""!==e}));W(t)}))}),[]);for(var Q=[],Z=0;Z<D;Z++)Q.push(l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Monto del hito ",Z+1),l.a.createElement(E.a.Control,{size:"sm",ref:a,name:"hito"+Z,id:"hito"+Z,onChange:J})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Descripcion del hito ",Z+1),l.a.createElement(E.a.Control,{size:"sm",ref:a,name:"hito_desc"+Z,id:"hito_desc"+Z,onChange:J}))));return l.a.createElement("div",{className:"d-flex flex-column align-items-center"},l.a.createElement(C.a,{show:N,onHide:function(){return y(!1)}},l.a.createElement(U.a,{style:{width:"30rem"}},l.a.createElement(U.a.Body,null,l.a.createElement(E.a,{onSubmit:r("edit"===v?function(e,t){t.preventDefault(),e.estado="PENDIENTE",g("noedit"),M("budgets",p,e)}:function(t,a){t.hora_estimada&&t.tarifa_hora&&(t.total=parseInt(t.hora_estimada)*parseInt(t.tarifa_hora));var n=Object(L.a)({idBudget:e.factura.idBudget,idFactura:e.factura.id},t);a.preventDefault(),b.firestore().collection("concepto").add(n)})},l.a.createElement("div",null,l.a.createElement("h5",null,"AGREGAR CONCEPTO"),l.a.createElement("hr",null),l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Concepto"),l.a.createElement(E.a.Control,{size:"sm",as:"select",selectedValue:"Choose...",ref:a,name:"concept",id:"concept",onChange:J,value:s.concept},l.a.createElement("option",null,"Choose ..."),K.map((function(e){return l.a.createElement("option",{key:e},e)})))),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Moneda"),l.a.createElement(E.a.Control,{size:"sm",as:"select",ref:a,selectedValue:"Choose...",name:"currency",id:"currency",onChange:J,value:s.currency},l.a.createElement("option",null,"Choose ..."),l.a.createElement("option",null,"Soles"),l.a.createElement("option",null,"Dolares"),l.a.createElement("option",null,"Euros"),l.a.createElement("option",null,"Libras esterlinas"))))),l.a.createElement("div",{style:{width:"90%"}},l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Tipo de honorario"),l.a.createElement(E.a.Control,{size:"sm",as:"select",defaultValue:"Choose...",ref:a,name:"form_cobro",id:"form_cobro",onChange:J,value:s.form_cobro},l.a.createElement("option",null,"Choose ..."),l.a.createElement("option",null,"Fijo"),l.a.createElement("option",null,"Exito"),l.a.createElement("option",null,"Horas")))),"Fijo"===w&&l.a.createElement(E.a.Group,null,l.a.createElement(E.a.Label,null,"Monto"),l.a.createElement(E.a.Control,{size:"sm",ref:a,name:"total",id:"total",onChange:J,value:s.total})),"Exito"===w&&l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Monto"),l.a.createElement(E.a.Control,{size:"sm",ref:a,name:"total",id:"total",onChange:J,value:s.total})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Definicion de \xe9xito"),l.a.createElement(E.a.Control,{size:"sm",ref:a,name:"descripcion",id:"descripcion",onChange:J,value:s.descripcion}))),"Horas"===w&&l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Tarifa horaria"),l.a.createElement(E.a.Control,{size:"sm",ref:a,name:"tarifa_hora",id:"tarifa_hora",onChange:J,value:s.tarifa_hora})),l.a.createElement(E.a.Group,{as:z.a},l.a.createElement(E.a.Label,null,"Horas"),l.a.createElement(E.a.Control,{size:"sm",ref:a,name:"hora_estimada",id:"hora_estimada",onChange:J,value:s.hora_estimada}))),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(E.a.Group,null,l.a.createElement(E.a.Label,null,"Forma de pago"),l.a.createElement(E.a.Control,{size:"sm",as:"select",defaultValue:"Choose...",ref:a,name:"form_payment",id:"form_payment",onChange:J,value:s.form_payment},l.a.createElement("option",null,"Choose ..."),l.a.createElement("option",null,"Hitos"),l.a.createElement("option",null,"Mensual"),l.a.createElement("option",null,"Bimestral"),l.a.createElement("option",null,"Trimestral"),l.a.createElement("option",null,"Semestral"),l.a.createElement("option",null,"Anual"))),"Hitos"===R&&l.a.createElement(E.a.Group,null,l.a.createElement(E.a.Label,null,"N\xfamero de hitos"),l.a.createElement(E.a.Control,{size:"sm",as:"select",defaultValue:"Choose...",ref:a,name:"num_hitos",id:"num_hitos",onChange:J,value:s.num_hitos},l.a.createElement("option",null,"Choose ..."),Object(T.a)(Array(5)).map((function(e,t){return l.a.createElement("option",null,t+1)}))),void 0!==D&&Q))),l.a.createElement(I.a,{className:"newButtonExample",size:"large",variant:"outlined",type:"submit"},"edit"===v?"EDIT":"SAVE"))))),l.a.createElement(I.a,{className:"concepto",onClick:function(){return y(!0)}},"Agregar Concepto"))}))),Ce=a(368),Ne=a(343),ye=a(337),Se=a(559),xe=a(362),we=a(344),Ae=a(143),ke=(a(521),Object(_.a)({table:{minWidth:650}})),Pe=function(e){var t=l.a.useState([]),a=Object(c.a)(t,2),r=a[0],o=a[1],i=ke();Object(n.useEffect)((function(){b.firestore().collection("concepto").where("idFactura","==",e.idFactura).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(L.a)({id:e.id},e.data()))})),o(t)}))}),[]);return r.length>0&&l.a.createElement("div",null,l.a.createElement(Se.a,{component:Ae.a},l.a.createElement(Ce.a,{className:i.table,"aria-label":"simple table"},l.a.createElement(xe.a,null,l.a.createElement(we.a,null,l.a.createElement(ye.a,null,"CONCEPTO"),l.a.createElement(ye.a,{align:"center"},"TIPO DE COBRO"),l.a.createElement(ye.a,{align:"center"},"FORMA DE PAGO"),l.a.createElement(ye.a,{align:"center"},"MONTO"))),l.a.createElement(Ne.a,null,r.map((function(e){return l.a.createElement(we.a,{key:e.id},l.a.createElement(ye.a,{component:"th",scope:"row"},e.concept),l.a.createElement(ye.a,{align:"center"},e.form_cobro),l.a.createElement(ye.a,{align:"center"},e.form_payment),l.a.createElement(ye.a,{align:"center"},e.total))}))))),l.a.createElement("div",{className:"d-flex justify-content-end mb-2 mt-1 btnState"},"aprobada"===e.statusFactura?l.a.createElement("div",{className:"container text-right"},"PENDIENTE DE PAGO"===e.substatus&&l.a.createElement("button",{onClick:function(){M("factura",e.idFactura,{status:"aprobada",substatus:"PAGADA"})},className:"btnAprobada"},"Pagar"),"PAGADA"===e.substatus&&l.a.createElement("span",{className:"text-success font-weight-bold"},"FACTURA PAGADA")):l.a.createElement("button",{onClick:function(){M("factura",e.idFactura,{status:"aprobada",substatus:"PENDIENTE DE PAGO"})},className:"btnUnit"},"Conforme"),"PAGADA"!==e.substatus&&l.a.createElement("button",{className:"btnUnit"},"Rechazar")))},Re=(a(522),a(556)),_e=function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),r=(a[0],a[1]),o=Object(n.useState)([]),i=Object(c.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)({}),d=Object(c.a)(m,2),E=d[0],p=(d[1],Object(n.useState)("")),f=Object(c.a)(p,2),h=(f[0],f[1],l.a.useState(!1)),v=Object(c.a)(h,2),g=v[0],j=v[1],O=l.a.useState(0),C=Object(c.a)(O,2),N=C[0],y=C[1];return Object(n.useEffect)((function(){b.firestore().collection("concepto").where("idBudget","==",e.idBudget).onSnapshot((function(e){if(e.docs.length>0){var t=e.docs.map((function(e){return parseInt(e.data().total)})).reduce((function(e,t){return e+t}));y(t)}console.log(N)}))}),[]),Object(n.useEffect)((function(){b.firestore().collection("factura").where("idBudget","==",e.idBudget).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(L.a)({id:e.id},e.data())}));u(t)}))}),[]),Object(n.useEffect)((function(){b.auth().currentUser?r(b.auth().currentUser):e.history.push("/login")}),[e.history]),l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",null,l.a.createElement("div",{className:"divButton d-flex justify-content-end mb-4"},l.a.createElement("button",{className:"mt-4button pull-right btnMain",onClick:function(){return j(!0)}},"Agregar Facturas")),l.a.createElement(Re.a,{className:"row mb-4 py-2 text-center "},l.a.createElement("div",{className:"col-4"},l.a.createElement("div",null,l.a.createElement("span",{className:"bold"},"Monto Inicial")),l.a.createElement("div",{style:{fontSize:"20px"}},e.totalbudget)),l.a.createElement("div",{className:"col-4"},l.a.createElement("div",null,l.a.createElement("span",{className:"bold"},"Monto Facturado")),l.a.createElement("div",{style:{fontSize:"20px"}},N)),l.a.createElement("div",{className:"col-4"},l.a.createElement("div",null,l.a.createElement("span",{className:"bold"},"Diferencia")),l.a.createElement("div",{className:e.totalbudget-N<0?"text-danger font-weight-bold fontBill":"text-success font-weight-bold fontBill"},e.totalbudget-N))),l.a.createElement(je,{show:g,budget:e.budget,idBudget:e.idBudget,factura:E,onHide:function(){return j(!1)}})),s.map((function(t){return l.a.createElement("div",{key:t.id,style:{marginBottom:"3%"}},l.a.createElement(Re.a,{className:"row py-2 d-flex justify-content-between align-items-center mb-1 px-4 factura"},l.a.createElement("span",{className:"width"},l.a.createElement("span",{className:"bold"},"N\xb0 de factura:")," ",t.numFactura),l.a.createElement("span",{className:"width"},l.a.createElement("span",{className:"bold"},"Fecha: "),t.dateFactura),l.a.createElement("span",{className:"width"},l.a.createElement("span",{className:"bold"},"PDF:")," ",l.a.createElement("img",{style:{cursor:"pointer"},src:"https://img.icons8.com/fluent/48/000000/pdf.png",alt:"pdf",onClick:function(){return window.open(t.pdf)}})),l.a.createElement(Oe,{factura:t})),l.a.createElement(Pe,{className:"container-fluid",idFactura:t.id,statusFactura:t.status,substatus:t.substatus,idBudget:e.idBudget}))})))},Fe=(a(523),Object(_.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar}}))),Te=function(e){var t=Fe(),a=(Object(F.a)(),Object(s.h)().id),r=Object(n.useState)([]),o=Object(c.a)(r,2),i=o[0],u=o[1],m=Object(n.useState)(0),d=Object(c.a)(m,2),E=(d[0],d[1]);return Object(n.useEffect)((function(){b.firestore().collection("budgets").doc(a).get().then((function(e){var t=Object.keys(e.data()).map((function(t){return"total"===t.substr(0,5)?parseInt(e.data()[t]):0})).reduce((function(e,t){return e+t}));E(t),u(e.data())}))}),[]),l.a.createElement("div",{className:t.root},l.a.createElement(se,null),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(K,{className:t.toolbar,path:"presupuesto por aprobar"}),l.a.createElement("div",{className:"container-details"},l.a.createElement(U.a,{style:{width:"100%"},className:"mb-4"},l.a.createElement(U.a.Header,{className:"d-flex justify-content-between name"},l.a.createElement("div",null,l.a.createElement("span",{className:"bold"},"Asunto:")," ",i.subject),l.a.createElement("div",null,l.a.createElement("span",{className:"bold"},"Responsable:")," ",i.corporative)),l.a.createElement(U.a.Body,{className:"body"},l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"columna vl text-center"},l.a.createElement("div",null,l.a.createElement("span",{className:"bold"},"Empresa")),l.a.createElement("div",null,i.company)),l.a.createElement("div",{className:"columna vl "},l.a.createElement("div",null,l.a.createElement("span",{className:"bold"},"Proveedor")),l.a.createElement("div",null,i.provider)),l.a.createElement("div",{className:"columna vl"},l.a.createElement("div",null,l.a.createElement("span",{className:"bold"},"Tipo de servicio")),l.a.createElement("div",null,i.type_service)),l.a.createElement("div",{className:"columna vl"},l.a.createElement("div",null,l.a.createElement("span",{className:"bold"},"Monto")),l.a.createElement("div",null,i.montoTotal," ",i.currency)),l.a.createElement("div",{className:"pdf"},l.a.createElement("div",{className:"bold"},"PDF"),l.a.createElement("img",{style:{cursor:"pointer"},src:"https://img.icons8.com/fluent/48/000000/pdf.png",alt:"pdf",onClick:function(){return window.open(i.pdf)}}))))),l.a.createElement("div",{className:"d-flex justify-content-end"},"pendiente de aprobacion"!==i.estado?l.a.createElement(N.a,{onClick:function(){return M("budgets",a,{estado:"pendiente de aprobacion"}),void e.history.push("/budgets")},className:"btnAprobar"},"Aprobar"):l.a.createElement(_e,{budget:i,idBudget:a,totalbudget:i.montoTotal})))))},Le=function(){var e=Object(s.h)().id;console.log(e);var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){b.firestore().collection("budgets").doc(e).get().then((function(e){o(e.data())}))}),[]),l.a.createElement("div",{className:"detail-budget"},l.a.createElement(U.a,{style:{width:"50rem"}},l.a.createElement(U.a.Header,{className:"d-flex justify-content-between"},l.a.createElement("div",null,"Asunto: ",r.subject),l.a.createElement("div",null,"Responsable: ",r.corporative)),l.a.createElement(U.a.Body,null,l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement("div",null,"Empresa:"),l.a.createElement("div",null,r.company)),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement("div",null,"Proveedor:"),l.a.createElement("div",null,r.provider)),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement("div",null,"Tipo de servicio:"),l.a.createElement("div",null,r.type_provider))),l.a.createElement("div",null,"Moneda: ",r.currency),l.a.createElement("div",null,"Monto Total Aprox: ",r.total),l.a.createElement("div",null,"Tipo de cobro: ",r.form_cobro),l.a.createElement("div",null,"Concepto: ",r.concept))))};var Be=function(){var e=Object(n.useState)(""),t=Object(c.a)(e,2),a=(t[0],t[1]),r=Object(n.useState)([]),o=Object(c.a)(r,2);return o[0],o[1],b.auth().onAuthStateChanged((function(e){a(e.email)})),l.a.createElement(v,null,l.a.createElement(i.b,null,l.a.createElement(s.d,null,l.a.createElement(s.b,{exact:!0,path:"/",component:O}),l.a.createElement(Ee,{exact:!0,path:"/provider/:id",component:ve}),l.a.createElement(Ee,{exact:!0,path:"/provider/:id",component:Le}),l.a.createElement(Ee,{exact:!0,path:"/provider",component:he}),l.a.createElement(Ee,{exact:!0,path:"/companies",component:me}),l.a.createElement(Ee,{exact:!0,path:"/subject/:id",component:ge}),l.a.createElement(Ee,{exact:!0,path:"/subject",component:X}),l.a.createElement(Ee,{exact:!0,path:"/facturacion",component:be}),l.a.createElement(Ee,{exact:!0,path:"/facturacion/:id",component:Le}),l.a.createElement(Ee,{exact:!0,path:"/budgets",component:J}),l.a.createElement(Ee,{exact:!0,path:"/budgets/:id",component:Te}),l.a.createElement(Ee,{exact:!0,path:"/home",component:ue}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(524);o.a.render(l.a.createElement(i.a,null,l.a.createElement(Be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[405,1,2]]]);
//# sourceMappingURL=main.16eeb8df.chunk.js.map